{"version":3,"file":"556.73c019539026bd30.bundle.js","mappings":"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","sources":["webpack://WebComponents/./runestone/dragndrop/js/DragDropTouch.js","webpack://WebComponents/./runestone/dragndrop/js/dragndrop-i18n.en.js","webpack://WebComponents/./runestone/dragndrop/js/dragndrop-i18n.pt-br.js","webpack://WebComponents/./runestone/dragndrop/js/dragndrop.js","webpack://WebComponents/./runestone/dragndrop/js/timeddnd.js"],"sourcesContent":["var DragDropTouch;\r\n(function (DragDropTouch_1) {\r\n    'use strict';\r\n    /**\r\n     * Object used to hold the data that is being dragged during drag and drop operations.\r\n     *\r\n     * It may hold one or more data items of different types. For more information about\r\n     * drag and drop operations and data transfer objects, see\r\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\">HTML Drag and Drop API</a>.\r\n     *\r\n     * This object is created automatically by the @see:DragDropTouch singleton and is\r\n     * accessible through the @see:dataTransfer property of all drag events.\r\n     */\r\n    var DataTransfer = (function () {\r\n        function DataTransfer() {\r\n            this._dropEffect = 'move';\r\n            this._effectAllowed = 'all';\r\n            this._data = {};\r\n        }\r\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\r\n            /**\r\n             * Gets or sets the type of drag-and-drop operation currently selected.\r\n             * The value must be 'none',  'copy',  'link', or 'move'.\r\n             */\r\n            get: function () {\r\n                return this._dropEffect;\r\n            },\r\n            set: function (value) {\r\n                this._dropEffect = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\r\n            /**\r\n             * Gets or sets the types of operations that are possible.\r\n             * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',\r\n             * 'linkMove', 'move', 'all' or 'uninitialized'.\r\n             */\r\n            get: function () {\r\n                return this._effectAllowed;\r\n            },\r\n            set: function (value) {\r\n                this._effectAllowed = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\r\n            /**\r\n             * Gets an array of strings giving the formats that were set in the @see:dragstart event.\r\n             */\r\n            get: function () {\r\n                return Object.keys(this._data);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * Removes the data associated with a given type.\r\n         *\r\n         * The type argument is optional. If the type is empty or not specified, the data\r\n         * associated with all types is removed. If data for the specified type does not exist,\r\n         * or the data transfer contains no data, this method will have no effect.\r\n         *\r\n         * @param type Type of data to remove.\r\n         */\r\n        DataTransfer.prototype.clearData = function (type) {\r\n            if (type != null) {\r\n                delete this._data[type.toLowerCase()];\r\n            }\r\n            else {\r\n                this._data = {};\r\n            }\r\n        };\r\n        /**\r\n         * Retrieves the data for a given type, or an empty string if data for that type does\r\n         * not exist or the data transfer contains no data.\r\n         *\r\n         * @param type Type of data to retrieve.\r\n         */\r\n        DataTransfer.prototype.getData = function (type) {\r\n            return this._data[type.toLowerCase()] || '';\r\n        };\r\n        /**\r\n         * Set the data for a given type.\r\n         *\r\n         * For a list of recommended drag types, please see\r\n         * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.\r\n         *\r\n         * @param type Type of data to add.\r\n         * @param value Data to add.\r\n         */\r\n        DataTransfer.prototype.setData = function (type, value) {\r\n            this._data[type.toLowerCase()] = value;\r\n        };\r\n        /**\r\n         * Set the image to be used for dragging if a custom one is desired.\r\n         *\r\n         * @param img An image element to use as the drag feedback image.\r\n         * @param offsetX The horizontal offset within the image.\r\n         * @param offsetY The vertical offset within the image.\r\n         */\r\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\r\n            var ddt = DragDropTouch._instance;\r\n            ddt._imgCustom = img;\r\n            ddt._imgOffset = { x: offsetX, y: offsetY };\r\n        };\r\n        return DataTransfer;\r\n    }());\r\n    DragDropTouch_1.DataTransfer = DataTransfer;\r\n    /**\r\n     * Defines a class that adds support for touch-based HTML5 drag/drop operations.\r\n     *\r\n     * The @see:DragDropTouch class listens to touch events and raises the\r\n     * appropriate HTML5 drag/drop events as if the events had been caused\r\n     * by mouse actions.\r\n     *\r\n     * The purpose of this class is to enable using existing, standard HTML5\r\n     * drag/drop code on mobile devices running IOS or Android.\r\n     *\r\n     * To use, include the DragDropTouch.js file on the page. The class will\r\n     * automatically start monitoring touch events and will raise the HTML5\r\n     * drag drop events (dragstart, dragenter, dragleave, drop, dragend) which\r\n     * should be handled by the application.\r\n     *\r\n     * For details and examples on HTML drag and drop, see\r\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations.\r\n     */\r\n    var DragDropTouch = (function () {\r\n        /**\r\n         * Initializes the single instance of the @see:DragDropTouch class.\r\n         */\r\n        function DragDropTouch() {\r\n            this._lastClick = 0;\r\n            // enforce singleton pattern\r\n            if (DragDropTouch._instance) {\r\n                throw 'DragDropTouch instance already created.';\r\n            }\r\n            // detect passive event support\r\n            // https://github.com/Modernizr/Modernizr/issues/1894\r\n            var supportsPassive = false;\r\n            document.addEventListener('test', function () { }, {\r\n                get passive() {\r\n                    supportsPassive = true;\r\n                    return true;\r\n                }\r\n            });\r\n            // listen to touch events\r\n            if (navigator.maxTouchPoints) {\r\n                var d = document, \r\n                    ts = this._touchstart.bind(this), \r\n                    tm = this._touchmove.bind(this), \r\n                    te = this._touchend.bind(this), \r\n                    opt = supportsPassive ? { passive: false, capture: false } : false;\r\n                d.addEventListener('touchstart', ts, opt);\r\n                d.addEventListener('touchmove', tm, opt);\r\n                d.addEventListener('touchend', te);\r\n                d.addEventListener('touchcancel', te);\r\n            }\r\n        }\r\n        /**\r\n         * Gets a reference to the @see:DragDropTouch singleton.\r\n         */\r\n        DragDropTouch.getInstance = function () {\r\n            return DragDropTouch._instance;\r\n        };\r\n        // ** event handlers\r\n        DragDropTouch.prototype._touchstart = function (e) {\r\n            var _this = this;\r\n            if (this._shouldHandle(e)) {\r\n                // raise double-click and prevent zooming\r\n                if (Date.now() - this._lastClick < DragDropTouch._DBLCLICK) {\r\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\r\n                        e.preventDefault();\r\n                        this._reset();\r\n                        return;\r\n                    }\r\n                }\r\n                // clear all variables\r\n                this._reset();\r\n                // get nearest draggable element\r\n                var src = this._closestDraggable(e.target);\r\n                if (src) {\r\n                    // give caller a chance to handle the hover/move events\r\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\r\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\r\n                        // get ready to start dragging\r\n                        this._dragSource = src;\r\n                        this._ptDown = this._getPoint(e);\r\n                        this._lastTouch = e;\r\n                        e.preventDefault();\r\n                        // show context menu if the user hasn't started dragging after a while\r\n                        setTimeout(function () {\r\n                            if (_this._dragSource == src && _this._img == null) {\r\n                                if (_this._dispatchEvent(e, 'contextmenu', src)) {\r\n                                    _this._reset();\r\n                                }\r\n                            }\r\n                        }, DragDropTouch._CTXMENU);\r\n                        if (DragDropTouch._ISPRESSHOLDMODE) {\r\n                            this._pressHoldInterval = setTimeout(function () {\r\n                                _this._isDragEnabled = true;\r\n                                _this._touchmove(e);\r\n                            }, DragDropTouch._PRESSHOLDAWAIT);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        DragDropTouch.prototype._touchmove = function (e) {\r\n            if (this._shouldCancelPressHoldMove(e)) {\r\n              this._reset();\r\n              return;\r\n            }\r\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\r\n                // see if target wants to handle move\r\n                var target = this._getTarget(e);\r\n                if (this._dispatchEvent(e, 'mousemove', target)) {\r\n                    this._lastTouch = e;\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                // start dragging\r\n                if (this._dragSource && !this._img && this._shouldStartDragging(e)) {\r\n                    this._dispatchEvent(e, 'dragstart', this._dragSource);\r\n                    this._createImage(e);\r\n                    this._dispatchEvent(e, 'dragenter', target);\r\n                }\r\n                // continue dragging\r\n                if (this._img) {\r\n                    this._lastTouch = e;\r\n                    e.preventDefault(); // prevent scrolling\r\n                    this._dispatchEvent(e, 'drag', this._dragSource);\r\n                    if (target != this._lastTarget) {\r\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);\r\n                        this._dispatchEvent(e, 'dragenter', target);\r\n                        this._lastTarget = target;\r\n                    }\r\n                    this._moveImage(e);\r\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target);\r\n                }\r\n            }\r\n        };\r\n        DragDropTouch.prototype._touchend = function (e) {\r\n            if (this._shouldHandle(e)) {\r\n                // see if target wants to handle up\r\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                // user clicked the element but didn't drag, so clear the source and simulate a click\r\n                if (!this._img) {\r\n                    this._dragSource = null;\r\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\r\n                    this._lastClick = Date.now();\r\n                }\r\n                // finish dragging\r\n                this._destroyImage();\r\n                if (this._dragSource) {\r\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\r\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);\r\n                    }\r\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);\r\n                    this._reset();\r\n                }\r\n            }\r\n        };\r\n        // ** utilities\r\n        // ignore events that have been handled or that involve more than one touch\r\n        DragDropTouch.prototype._shouldHandle = function (e) {\r\n            return e &&\r\n                !e.defaultPrevented &&\r\n                e.touches && e.touches.length < 2;\r\n        };\r\n\r\n        // use regular condition outside of press & hold mode\r\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\r\n          return !DragDropTouch._ISPRESSHOLDMODE && this._shouldHandle(e);\r\n        };\r\n\r\n        // allow to handle moves that involve many touches for press & hold\r\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\r\n          return DragDropTouch._ISPRESSHOLDMODE &&\r\n              this._isDragEnabled && e && e.touches && e.touches.length;\r\n        };\r\n\r\n        // reset data if user drags without pressing & holding\r\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\r\n          return DragDropTouch._ISPRESSHOLDMODE && !this._isDragEnabled &&\r\n              this._getDelta(e) > DragDropTouch._PRESSHOLDMARGIN;\r\n        };\r\n\r\n        // start dragging when specified delta is detected\r\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\r\n            var delta = this._getDelta(e);\r\n            return delta > DragDropTouch._THRESHOLD ||\r\n                (DragDropTouch._ISPRESSHOLDMODE && delta >= DragDropTouch._PRESSHOLDTHRESHOLD);\r\n        }\r\n\r\n        // clear all members\r\n        DragDropTouch.prototype._reset = function () {\r\n            this._destroyImage();\r\n            this._dragSource = null;\r\n            this._lastTouch = null;\r\n            this._lastTarget = null;\r\n            this._ptDown = null;\r\n            this._isDragEnabled = false;\r\n            this._isDropZone = false;\r\n            this._dataTransfer = new DataTransfer();\r\n            clearInterval(this._pressHoldInterval);\r\n        };\r\n        // get point for a touch event\r\n        DragDropTouch.prototype._getPoint = function (e, page) {\r\n            if (e && e.touches) {\r\n                e = e.touches[0];\r\n            }\r\n            return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };\r\n        };\r\n        // get distance between the current touch event and the first one\r\n        DragDropTouch.prototype._getDelta = function (e) {\r\n            if (DragDropTouch._ISPRESSHOLDMODE && !this._ptDown) { return 0; }\r\n            var p = this._getPoint(e);\r\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\r\n        };\r\n        // get the element at a given touch event\r\n        DragDropTouch.prototype._getTarget = function (e) {\r\n            var pt = this._getPoint(e), el = document.elementFromPoint(pt.x, pt.y);\r\n            while (el && getComputedStyle(el).pointerEvents == 'none') {\r\n                el = el.parentElement;\r\n            }\r\n            return el;\r\n        };\r\n        // create drag image from source element\r\n        DragDropTouch.prototype._createImage = function (e) {\r\n            // just in case...\r\n            if (this._img) {\r\n                this._destroyImage();\r\n            }\r\n            // create drag image from custom element or drag source\r\n            var src = this._imgCustom || this._dragSource;\r\n            this._img = src.cloneNode(true);\r\n            this._copyStyle(src, this._img);\r\n            this._img.style.top = this._img.style.left = '-9999px';\r\n            // if creating from drag source, apply offset and opacity\r\n            if (!this._imgCustom) {\r\n                var rc = src.getBoundingClientRect(), pt = this._getPoint(e);\r\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\r\n                this._img.style.opacity = DragDropTouch._OPACITY.toString();\r\n            }\r\n            // add image to document\r\n            this._moveImage(e);\r\n            document.body.appendChild(this._img);\r\n        };\r\n        // dispose of drag image element\r\n        DragDropTouch.prototype._destroyImage = function () {\r\n            if (this._img && this._img.parentElement) {\r\n                this._img.parentElement.removeChild(this._img);\r\n            }\r\n            this._img = null;\r\n            this._imgCustom = null;\r\n        };\r\n        // move the drag image element\r\n        DragDropTouch.prototype._moveImage = function (e) {\r\n            var _this = this;\r\n            requestAnimationFrame(function () {\r\n                if (_this._img) {\r\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\r\n                    s.position = 'absolute';\r\n                    s.pointerEvents = 'none';\r\n                    s.zIndex = '999999';\r\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\r\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\r\n                }\r\n            });\r\n        };\r\n        // copy properties from an object to another\r\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\r\n            for (var i = 0; i < props.length; i++) {\r\n                var p = props[i];\r\n                dst[p] = src[p];\r\n            }\r\n        };\r\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\r\n            // remove potentially troublesome attributes\r\n            DragDropTouch._rmvAtts.forEach(function (att) {\r\n                dst.removeAttribute(att);\r\n            });\r\n            // copy canvas content\r\n            if (src instanceof HTMLCanvasElement) {\r\n                var cSrc = src, cDst = dst;\r\n                cDst.width = cSrc.width;\r\n                cDst.height = cSrc.height;\r\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\r\n            }\r\n            // copy style (without transitions)\r\n            var cs = getComputedStyle(src);\r\n            for (var i = 0; i < cs.length; i++) {\r\n                var key = cs[i];\r\n                if (key.indexOf('transition') < 0) {\r\n                    dst.style[key] = cs[key];\r\n                }\r\n            }\r\n            dst.style.pointerEvents = 'none';\r\n            // and repeat for all children\r\n            for (var i = 0; i < src.children.length; i++) {\r\n                this._copyStyle(src.children[i], dst.children[i]);\r\n            }\r\n        };\r\n        DragDropTouch.prototype._dispatchEvent = function (e, type, target) {\r\n            if (e && target) {\r\n                var evt = document.createEvent('Event'), t = e.touches ? e.touches[0] : e;\r\n                evt.initEvent(type, true, true);\r\n                evt.button = 0;\r\n                evt.which = evt.buttons = 1;\r\n                this._copyProps(evt, e, DragDropTouch._kbdProps);\r\n                this._copyProps(evt, t, DragDropTouch._ptProps);\r\n                evt.dataTransfer = this._dataTransfer;\r\n                target.dispatchEvent(evt);\r\n                return evt.defaultPrevented;\r\n            }\r\n            return false;\r\n        };\r\n        // gets an element's closest draggable ancestor\r\n        DragDropTouch.prototype._closestDraggable = function (e) {\r\n            for (; e; e = e.parentElement) {\r\n                if (e.hasAttribute('draggable') && e.draggable) {\r\n                    return e;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        return DragDropTouch;\r\n    }());\r\n    /*private*/ DragDropTouch._instance = new DragDropTouch(); // singleton\r\n    // constants\r\n    DragDropTouch._THRESHOLD = 5; // pixels to move before drag starts\r\n    DragDropTouch._OPACITY = 0.5; // drag image opacity\r\n    DragDropTouch._DBLCLICK = 500; // max ms between clicks in a double click\r\n    DragDropTouch._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\r\n    DragDropTouch._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\r\n    DragDropTouch._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\r\n    DragDropTouch._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\r\n    DragDropTouch._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\r\n    // copy styles/attributes from drag source to drag image element\r\n    DragDropTouch._rmvAtts = 'id,class,style,draggable'.split(',');\r\n    // synthesize and dispatch an event\r\n    // returns true if the event has been handled (e.preventDefault == true)\r\n    DragDropTouch._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\r\n    DragDropTouch._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY'.split(',');\r\n    DragDropTouch_1.DragDropTouch = DragDropTouch;\r\n})(DragDropTouch || (DragDropTouch = {}));\r\n","$.i18n().load({\n    en: {\n        msg_dragndrop_correct_answer: \"You are correct!\",\n        msg_dragndrop_incorrect_answer:\n            \"Incorret. You got $1 correct and $2 incorrect out of $3. You left $4 blank.\",\n        msg_dragndrop_check_me: \"Check me\",\n        msg_dragndrop_reset: \"Reset\",\n    },\n});\n","$.i18n().load({\n    \"pt-br\": {\n        msg_dragndrop_correct_answer: \"Correto!\",\n        msg_dragndrop_incorrect_answer:\n            \"Incorreto. Você teve $1 correto(s) e $2 incorreto(s) de $3. Você deixou $4 em branco.\",\n        msg_dragndrop_check_me: \"Verificar\",\n        msg_dragndrop_reset: \"Resetar\",\n    },\n});\n","/*==========================================\n=======     Master dragndrop.js     ========\n============================================\n===     This file contains the JS for    ===\n=== the Runestone Drag n drop component. ===\n============================================\n===              Created by              ===\n===           Isaiah Mayerchak           ===\n===                7/6/15                ===\n===              Brad MIller             ===\n===                2/7/19                ===\n==========================================*/\n\"use strict\";\n\nimport RunestoneBase from \"../../common/js/runestonebase.js\";\nimport \"../css/dragndrop.css\";\nimport \"./dragndrop-i18n.en.js\";\nimport \"./dragndrop-i18n.pt-br.js\";\nimport \"./DragDropTouch.js\";\n\nexport var ddList = {}; // Dictionary that contains all instances of dragndrop objects\n\nexport default class DragNDrop extends RunestoneBase {\n    constructor(opts) {\n        super(opts);\n        var orig = opts.orig; // entire <ul> element that will be replaced by new HTML\n        this.origElem = orig;\n        this.divid = orig.id;\n        this.useRunestoneServices = opts.useRunestoneServices;\n        this.random = false;\n        if ($(this.origElem).is(\"[data-random]\")) {\n            this.random = true;\n        }\n        this.feedback = \"\";\n        this.dragPairArray = [];\n        this.question = \"\";\n        this.populate(); // Populates this.dragPairArray, this.feedback and this.question\n        this.createNewElements();\n        this.caption = \"Drag-N-Drop\";\n        this.addCaption(\"runestone\");\n        if (typeof Prism !== \"undefined\") {\n            Prism.highlightAllUnder(this.containerDiv);\n        }\n    }\n    /*======================\n    === Update variables ===\n    ======================*/\n    populate() {\n        for (var i = 0; i < this.origElem.childNodes.length; i++) {\n            if (\n                $(this.origElem.childNodes[i]).data(\"subcomponent\") ===\n                \"dropzone\"\n            ) {\n                var tmp = $(this.origElem).find(\n                    `#${$(this.origElem.childNodes[i]).attr(\"for\")}`\n                )[0];\n                var replaceSpan = document.createElement(\"span\");\n                replaceSpan.innerHTML = tmp.innerHTML;\n                replaceSpan.id = this.divid + tmp.id;\n                $(replaceSpan).attr(\"draggable\", \"true\");\n                $(replaceSpan).addClass(\"draggable-drag\");\n                var otherReplaceSpan = document.createElement(\"span\");\n                otherReplaceSpan.innerHTML =\n                    this.origElem.childNodes[i].innerHTML;\n                $(otherReplaceSpan).addClass(\"draggable-drop\");\n                this.setEventListeners(replaceSpan, otherReplaceSpan);\n                var tmpArr = [];\n                tmpArr.push(replaceSpan);\n                tmpArr.push(otherReplaceSpan);\n                this.dragPairArray.push(tmpArr);\n            } else if (\n                $(this.origElem.childNodes[i]).data(\"subcomponent\") ===\n                \"question\"\n            ) {\n                this.question = this.origElem.childNodes[i].innerHTML;\n            } else if (\n                $(this.origElem.childNodes[i]).data(\"subcomponent\") ===\n                \"feedback\"\n            ) {\n                this.feedback = this.origElem.childNodes[i].innerHTML;\n            }\n        }\n    }\n    /*========================================\n    == Create new HTML elements and replace ==\n    ==      original element with them      ==\n    ========================================*/\n    createNewElements() {\n        this.containerDiv = document.createElement(\"div\");\n        this.containerDiv.id = this.divid;\n        $(this.containerDiv).addClass(\"draggable-container\");\n        $(this.containerDiv).html(this.question);\n        this.containerDiv.appendChild(document.createElement(\"br\"));\n        this.dragDropWrapDiv = document.createElement(\"div\"); // Holds the draggables/dropzones, prevents feedback from bleeding in\n        $(this.dragDropWrapDiv).css(\"display\", \"block\");\n        this.containerDiv.appendChild(this.dragDropWrapDiv);\n        this.draggableDiv = document.createElement(\"div\");\n        $(this.draggableDiv).addClass(\"rsdraggable dragzone\");\n        this.addDragDivListeners();\n        this.dropZoneDiv = document.createElement(\"div\");\n        $(this.dropZoneDiv).addClass(\"rsdraggable\");\n        this.dragDropWrapDiv.appendChild(this.draggableDiv);\n        this.dragDropWrapDiv.appendChild(this.dropZoneDiv);\n        this.createButtons();\n        this.checkServer(\"dragNdrop\", true);\n        self = this;\n        self.queueMathJax(self.containerDiv);\n\n    }\n    finishSettingUp() {\n        this.appendReplacementSpans();\n        this.renderFeedbackDiv();\n        $(this.origElem).replaceWith(this.containerDiv);\n        if (!this.hasStoredDropzones) {\n            this.minheight = $(this.draggableDiv).height();\n        }\n        this.draggableDiv.style.minHeight = this.minheight.toString() + \"px\";\n        if ($(this.dropZoneDiv).height() > this.minheight) {\n            this.dragDropWrapDiv.style.minHeight =\n                $(this.dropZoneDiv).height().toString() + \"px\";\n        } else {\n            this.dragDropWrapDiv.style.minHeight =\n                this.minheight.toString() + \"px\";\n        }\n    }\n    addDragDivListeners() {\n        let self = this;\n        this.draggableDiv.addEventListener(\n            \"dragover\",\n            function (ev) {\n                ev.preventDefault();\n                if ($(this.draggableDiv).hasClass(\"possibleDrop\")) {\n                    return;\n                }\n                $(this.draggableDiv).addClass(\"possibleDrop\");\n            }.bind(this)\n        );\n        this.draggableDiv.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if ($(this.draggableDiv).hasClass(\"possibleDrop\")) {\n                    $(this.draggableDiv).removeClass(\"possibleDrop\");\n                }\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    !$(this.draggableDiv).has(draggedSpan).length &&\n                    !this.strangerDanger(draggedSpan)\n                ) {\n                    // Make sure element isn't already there--prevents erros w/appending child\n                    this.draggableDiv.appendChild(draggedSpan);\n                }\n            }.bind(this)\n        );\n        this.draggableDiv.addEventListener(\n            \"dragleave\",\n            function (e) {\n                if (!$(this.draggableDiv).hasClass(\"possibleDrop\")) {\n                    return;\n                }\n                $(this.draggableDiv).removeClass(\"possibleDrop\");\n            }.bind(this)\n        );\n    }\n    createButtons() {\n        this.buttonDiv = document.createElement(\"div\");\n        this.submitButton = document.createElement(\"button\"); // Check me button\n        this.submitButton.textContent = $.i18n(\"msg_dragndrop_check_me\");\n        $(this.submitButton).attr({\n            class: \"btn btn-success drag-button\",\n            name: \"do answer\",\n            type: \"button\",\n        });\n        this.submitButton.onclick = function () {\n            this.checkCurrentAnswer();\n            this.renderFeedback();\n            this.logCurrentAnswer();\n        }.bind(this);\n        this.resetButton = document.createElement(\"button\"); // Check me button\n        this.resetButton.textContent = $.i18n(\"msg_dragndrop_reset\");\n        $(this.resetButton).attr({\n            class: \"btn btn-default drag-button drag-reset\",\n            name: \"do answer\",\n        });\n        this.resetButton.onclick = function () {\n            this.resetDraggables();\n        }.bind(this);\n        this.buttonDiv.appendChild(this.submitButton);\n        this.buttonDiv.appendChild(this.resetButton);\n        this.containerDiv.appendChild(this.buttonDiv);\n    }\n    appendReplacementSpans() {\n        this.createIndexArray();\n        this.randomizeIndexArray();\n        for (let i = 0; i < this.dragPairArray.length; i++) {\n            if (this.hasStoredDropzones) {\n                if (\n                    $.inArray(this.indexArray[i][0], this.pregnantIndexArray) <\n                    0\n                ) {\n                    this.draggableDiv.appendChild(\n                        this.dragPairArray[this.indexArray[i]][0]\n                    );\n                }\n            } else {\n                this.draggableDiv.appendChild(\n                    this.dragPairArray[this.indexArray[i]][0]\n                );\n            }\n        }\n        this.randomizeIndexArray();\n        for (let i = 0; i < this.dragPairArray.length; i++) {\n            if (this.hasStoredDropzones) {\n                if (this.pregnantIndexArray[this.indexArray[i]] !== \"-1\") {\n                    this.dragPairArray[this.indexArray[i]][1].appendChild(\n                        this.dragPairArray[\n                            this.pregnantIndexArray[this.indexArray[i]]\n                        ][0]\n                    );\n                }\n            }\n            this.dropZoneDiv.appendChild(\n                this.dragPairArray[this.indexArray[i]][1]\n            );\n        }\n    }\n    setEventListeners(dgSpan, dpSpan) {\n        // Adds HTML5 \"drag and drop\" UI functionality\n        let self = this;\n        dgSpan.addEventListener(\"dragstart\", function (ev) {\n            ev.dataTransfer.setData(\"draggableID\", ev.target.id);\n        });\n        dgSpan.addEventListener(\"dragover\", function (ev) {\n            ev.preventDefault();\n        });\n        dgSpan.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    this.hasNoDragChild(ev.target) &&\n                    draggedSpan != ev.target &&\n                    !this.strangerDanger(draggedSpan)\n                ) {\n                    // Make sure element isn't already there--prevents erros w/appending child\n                    this.draggableDiv.appendChild(draggedSpan);\n                }\n            }.bind(this)\n        );\n        dpSpan.addEventListener(\n            \"dragover\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if ($(ev.target).hasClass(\"possibleDrop\")) {\n                    return;\n                }\n                if (\n                    $(ev.target).hasClass(\"draggable-drop\") &&\n                    this.hasNoDragChild(ev.target)\n                ) {\n                    $(ev.target).addClass(\"possibleDrop\");\n                }\n            }.bind(this)\n        );\n        dpSpan.addEventListener(\"dragleave\", function (ev) {\n            self.isAnswered = true;\n            ev.preventDefault();\n            if (!$(ev.target).hasClass(\"possibleDrop\")) {\n                return;\n            }\n            $(ev.target).removeClass(\"possibleDrop\");\n        });\n        dpSpan.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if ($(ev.target).hasClass(\"possibleDrop\")) {\n                    $(ev.target).removeClass(\"possibleDrop\");\n                }\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    $(ev.target).hasClass(\"draggable-drop\") &&\n                    this.hasNoDragChild(ev.target) &&\n                    !this.strangerDanger(draggedSpan)\n                ) {\n                    // Make sure element isn't already there--prevents erros w/appending child\n                    ev.target.appendChild(draggedSpan);\n                }\n            }.bind(this)\n        );\n    }\n    renderFeedbackDiv() {\n        if (!this.feedBackDiv) {\n            this.feedBackDiv = document.createElement(\"div\");\n            this.feedBackDiv.id = this.divid + \"_feedback\";\n            this.containerDiv.appendChild(document.createElement(\"br\"));\n            this.containerDiv.appendChild(this.feedBackDiv);\n        }\n    }\n    /*=======================\n    == Auxiliary functions ==\n    =======================*/\n    strangerDanger(testSpan) {\n        // Returns true if the test span doesn't belong to this instance of DragNDrop\n        var strangerDanger = true;\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            if (testSpan === this.dragPairArray[i][0]) {\n                strangerDanger = false;\n            }\n        }\n        return strangerDanger;\n    }\n    hasNoDragChild(parent) {\n        // Ensures that each dropZoneDiv can have only one draggable child\n        var counter = 0;\n        for (var i = 0; i < parent.childNodes.length; i++) {\n            if ($(parent.childNodes[i]).attr(\"draggable\") === \"true\") {\n                counter++;\n            }\n        }\n        if (counter >= 1) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n    createIndexArray() {\n        this.indexArray = [];\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            this.indexArray.push(i);\n        }\n    }\n    randomizeIndexArray() {\n        // Shuffles around indices so the matchable elements aren't in a predictable order\n        var currentIndex = this.indexArray.length,\n            temporaryValue,\n            randomIndex;\n        // While there remain elements to shuffle...\n        while (currentIndex !== 0) {\n            // Pick a remaining element...\n            randomIndex = Math.floor(Math.random() * currentIndex);\n            currentIndex -= 1;\n            // And swap it with the current element.\n            temporaryValue = this.indexArray[currentIndex];\n            this.indexArray[currentIndex] = this.indexArray[randomIndex];\n            this.indexArray[randomIndex] = temporaryValue;\n        }\n    }\n    /*==============================\n    == Reset button functionality ==\n    ==============================*/\n    resetDraggables() {\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            for (\n                var j = 0;\n                j < this.dragPairArray[i][1].childNodes.length;\n                j++\n            ) {\n                if (\n                    $(this.dragPairArray[i][1].childNodes[j]).attr(\n                        \"draggable\"\n                    ) === \"true\"\n                ) {\n                    this.draggableDiv.appendChild(\n                        this.dragPairArray[i][1].childNodes[j]\n                    );\n                }\n            }\n        }\n        this.feedBackDiv.style.display = \"none\";\n    }\n    /*===========================\n    == Evaluation and feedback ==\n    ===========================*/\n\n    checkCurrentAnswer() {\n        this.correct = true;\n        this.unansweredNum = 0;\n        this.incorrectNum = 0;\n        this.dragNum = this.dragPairArray.length;\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            if (\n                !$(this.dragPairArray[i][1]).has(this.dragPairArray[i][0])\n                    .length\n            ) {\n                this.correct = false;\n                this.incorrectNum++;\n            }\n            if (this.hasNoDragChild(this.dragPairArray[i][1])) {\n                this.unansweredNum++;\n                this.incorrectNum -= 1;\n            }\n        }\n        this.correctNum = this.dragNum - this.incorrectNum - this.unansweredNum;\n        this.percent = this.correctNum / this.dragPairArray.length;\n        this.setLocalStorage({ correct: this.correct ? \"T\" : \"F\" });\n    }\n\n    async logCurrentAnswer(sid) {\n        let answer = this.pregnantIndexArray.join(\";\");\n        let data = {\n            event: \"dragNdrop\",\n            act: answer,\n            answer: answer,\n            min_height: this.minheight,\n            div_id: this.divid,\n            correct: this.correct,\n            correctNum: this.correctNum,\n            dragNum: this.dragNum,\n        };\n        if (typeof sid !== \"undefined\") {\n            data.sid = sid;\n        }\n        await this.logBookEvent(data);\n    }\n    renderFeedback() {\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            if (\n                !$(this.dragPairArray[i][1]).has(this.dragPairArray[i][0])\n                    .length\n            ) {\n                $(this.dragPairArray[i][1]).addClass(\"drop-incorrect\");\n            } else {\n                $(this.dragPairArray[i][1]).removeClass(\"drop-incorrect\");\n            }\n        }\n\n        if (!this.feedBackDiv) {\n            this.renderFeedbackDiv();\n        }\n        this.feedBackDiv.style.display = \"block\";\n        if (this.correct) {\n            var msgCorrect = $.i18n(\"msg_dragndrop_correct_answer\");\n            $(this.feedBackDiv).html(msgCorrect);\n            $(this.feedBackDiv).attr(\n                \"class\",\n                \"alert alert-info draggable-feedback\"\n            );\n        } else {\n            var msgIncorrect = $.i18n(\n                $.i18n(\"msg_dragndrop_incorrect_answer\"),\n                this.correctNum,\n                this.incorrectNum,\n                this.dragNum,\n                this.unansweredNum\n            );\n            $(this.feedBackDiv).html(msgIncorrect + \" \" + this.feedback);\n            $(this.feedBackDiv).attr(\n                \"class\",\n                \"alert alert-danger draggable-feedback\"\n            );\n        }\n    }\n    /*===================================\n    === Checking/restoring from storage ===\n    ===================================*/\n    restoreAnswers(data) {\n        // Restore answers from storage retrieval done in RunestoneBase\n        this.hasStoredDropzones = true;\n        this.minheight = data.min_height;\n        this.pregnantIndexArray = data.answer.split(\";\");\n        this.finishSettingUp();\n    }\n    checkLocalStorage() {\n        if (this.graderactive) {\n            return;\n        }\n        var storedObj;\n        this.hasStoredDropzones = false;\n        var len = localStorage.length;\n        if (len > 0) {\n            var ex = localStorage.getItem(this.localStorageKey());\n            if (ex !== null) {\n                this.hasStoredDropzones = true;\n                try {\n                    storedObj = JSON.parse(ex);\n                    this.minheight = storedObj.min_height;\n                } catch (err) {\n                    // error while parsing; likely due to bad value stored in storage\n                    console.log(err.message);\n                    localStorage.removeItem(this.localStorageKey());\n                    this.hasStoredDropzones = false;\n                    this.finishSettingUp();\n                    return;\n                }\n                this.pregnantIndexArray = storedObj.answer.split(\";\");\n                if (this.useRunestoneServices) {\n                    // store answer in database\n                    var answer = this.pregnantIndexArray.join(\";\");\n                    this.logBookEvent({\n                        event: \"dragNdrop\",\n                        act: answer,\n                        answer: answer,\n                        min_height: this.minheight,\n                        div_id: this.divid,\n                        correct: storedObj.correct,\n                    });\n                }\n            }\n        }\n        this.finishSettingUp();\n    }\n\n    setLocalStorage(data) {\n        if (data.answer === undefined) {\n            // If we didn't load from the server, we must generate the data\n            this.pregnantIndexArray = [];\n            for (var i = 0; i < this.dragPairArray.length; i++) {\n                if (!this.hasNoDragChild(this.dragPairArray[i][1])) {\n                    for (var j = 0; j < this.dragPairArray.length; j++) {\n                        if (\n                            $(this.dragPairArray[i][1]).has(\n                                this.dragPairArray[j][0]\n                            ).length\n                        ) {\n                            this.pregnantIndexArray.push(j);\n                        }\n                    }\n                } else {\n                    this.pregnantIndexArray.push(-1);\n                }\n            }\n        }\n        var timeStamp = new Date();\n        var correct = data.correct;\n        var storageObj = {\n            answer: this.pregnantIndexArray.join(\";\"),\n            min_height: this.minheight,\n            timestamp: timeStamp,\n            correct: correct,\n        };\n        localStorage.setItem(\n            this.localStorageKey(),\n            JSON.stringify(storageObj)\n        );\n    }\n\n    disableInteraction() {\n        $(this.resetButton).hide();\n        for (var i = 0; i < this.dragPairArray.length; i++) {\n            // No more dragging\n            $(this.dragPairArray[i][0]).attr(\"draggable\", \"false\");\n            $(this.dragPairArray[i][0]).css(\"cursor\", \"initial\");\n        }\n    }\n}\n\n/*=================================\n== Find the custom HTML tags and ==\n==   execute our code on them    ==\n=================================*/\n$(document).on(\"runestone:login-complete\", function () {\n    $(\"[data-component=dragndrop]\").each(function (index) {\n        var opts = {\n            orig: this,\n            useRunestoneServices: eBookConfig.useRunestoneServices,\n        };\n        if ($(this).closest(\"[data-component=timedAssessment]\").length == 0) {\n            // If this element exists within a timed component, don't render it here\n            try {\n                ddList[this.id] = new DragNDrop(opts);\n            } catch (err) {\n                console.log(`Error rendering DragNDrop Problem ${this.id}`);\n            }\n        }\n    });\n});\n","\"use strict\";\n\nimport DragNDrop from \"./dragndrop.js\";\n\nexport default class TimedDragNDrop extends DragNDrop {\n    constructor(opts) {\n        super(opts);\n        this.finishSettingUp();\n        this.renderTimedIcon(this.containerDiv);\n        this.hideButtons();\n    }\n    hideButtons() {\n        $(this.submitButton).hide();\n    }\n    renderTimedIcon(component) {\n        // renders the clock icon on timed components.    The component parameter\n        // is the element that the icon should be appended to.\n        var timeIconDiv = document.createElement(\"div\");\n        var timeIcon = document.createElement(\"img\");\n        $(timeIcon).attr({\n            src: \"../_static/clock.png\",\n            style: \"width:15px;height:15px\",\n        });\n        timeIconDiv.className = \"timeTip\";\n        timeIconDiv.title = \"\";\n        timeIconDiv.appendChild(timeIcon);\n        $(component).prepend(timeIconDiv);\n    }\n    checkCorrectTimed() {\n        // Returns if the question was correct.    Used for timed assessment grading.\n        if (this.unansweredNum === this.dragPairArray.length) {\n            this.correct = null;\n        }\n        switch (this.correct) {\n            case true:\n                return \"T\";\n            case false:\n                return \"F\";\n            default:\n                return null;\n        }\n    }\n    hideFeedback() {\n        $(this.feedBackDiv).hide();\n    }\n}\n\nif (typeof window.component_factory === \"undefined\") {\n    window.component_factory = {};\n}\nwindow.component_factory[\"dragndrop\"] = function (opts) {\n    if (opts.timed) {\n        return new TimedDragNDrop(opts);\n    }\n    return new DragNDrop(opts);\n};\n"],"names":["DragDropTouch","DragDropTouch_1","DataTransfer","this","_dropEffect","_effectAllowed","_data","Object","defineProperty","prototype","get","set","value","enumerable","configurable","keys","clearData","type","toLowerCase","getData","setData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","_lastClick","supportsPassive","document","addEventListener","passive","navigator","maxTouchPoints","d","ts","_touchstart","bind","tm","_touchmove","te","_touchend","opt","capture","getInstance","e","_this","_shouldHandle","Date","now","_DBLCLICK","_dispatchEvent","target","preventDefault","_reset","src","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","setTimeout","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","touches","length","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","clearInterval","page","pageX","clientX","pageY","clientY","p","Math","abs","pt","el","elementFromPoint","getComputedStyle","pointerEvents","parentElement","cloneNode","_copyStyle","style","top","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","appendChild","removeChild","requestAnimationFrame","s","position","zIndex","round","_copyProps","dst","props","i","_rmvAtts","forEach","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","width","height","getContext","drawImage","cs","key","children","evt","createEvent","t","initEvent","button","which","buttons","_kbdProps","_ptProps","dataTransfer","dispatchEvent","hasAttribute","draggable","split","$","i18n","load","en","msg_dragndrop_correct_answer","msg_dragndrop_incorrect_answer","msg_dragndrop_check_me","msg_dragndrop_reset","ddList","DragNDrop","constructor","opts","super","orig","origElem","divid","id","useRunestoneServices","random","is","feedback","dragPairArray","question","populate","createNewElements","caption","addCaption","Prism","highlightAllUnder","containerDiv","childNodes","data","tmp","find","attr","replaceSpan","createElement","innerHTML","addClass","otherReplaceSpan","setEventListeners","tmpArr","push","html","dragDropWrapDiv","css","draggableDiv","addDragDivListeners","dropZoneDiv","createButtons","checkServer","self","queueMathJax","finishSettingUp","appendReplacementSpans","renderFeedbackDiv","replaceWith","hasStoredDropzones","minheight","minHeight","ev","hasClass","isAnswered","removeClass","draggedSpan","getElementById","has","strangerDanger","buttonDiv","submitButton","textContent","class","name","onclick","checkCurrentAnswer","renderFeedback","logCurrentAnswer","resetButton","resetDraggables","createIndexArray","randomizeIndexArray","inArray","indexArray","pregnantIndexArray","dgSpan","dpSpan","hasNoDragChild","feedBackDiv","testSpan","parent","counter","temporaryValue","randomIndex","currentIndex","floor","j","display","correct","unansweredNum","incorrectNum","dragNum","correctNum","percent","setLocalStorage","async","sid","answer","join","event","act","min_height","div_id","logBookEvent","msgCorrect","msgIncorrect","restoreAnswers","checkLocalStorage","graderactive","storedObj","localStorage","ex","getItem","localStorageKey","JSON","parse","err","console","log","message","removeItem","undefined","timeStamp","storageObj","timestamp","setItem","stringify","disableInteraction","hide","on","each","index","eBookConfig","closest","TimedDragNDrop","renderTimedIcon","hideButtons","component","timeIconDiv","timeIcon","className","title","prepend","checkCorrectTimed","hideFeedback","window","component_factory","timed"],"sourceRoot":""}